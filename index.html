<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <!-- üëá WITH THESE ENHANCED META TAGS -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#1877f2">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="preload" as="image" href="https://satyapal.vercel.app/profile.jpg">
    <title>Satyapal Singh</title>

    <!-- üëá ADD CRITICAL CSS (BEFORE main stylesheet) -->
    <style>
        body { margin: 0; font-family: system-ui; }
        .navbar { position: fixed; top: 0; width: 100%; background: #fff; z-index: 1000; }
        .main-container { margin-top: 56px; }
    </style>
        <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://satyapal.vercel.app/favicon.png">
    
    <!-- Open Graph Meta Tags for Social Media -->
    <meta property="og:title" content="Satya Pal Singh - State Awarded Teacher">
    <meta property="og:description" content="‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§™‡•Å‡§∞‡§∏‡•ç‡§ï‡•É‡§§ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï | ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§Ö‡§ß‡§ø‡§µ‡•á‡§∂‡§® ‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£ ‡§ö‡§ø‡§®‡•ç‡§π ‡§Ö‡§µ‡§æ‡§∞‡•ç‡§° ‡§µ‡§ø‡§ú‡•á‡§§‡§æ">
    <meta property="og:image" content="https://satyapal.vercel.app/og-image.jpg">
    <meta property="og:url" content="https://satyapal.vercel.app/">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Satya Pal Singh - State Awarded Teacher">
    <meta name="twitter:description" content="‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§™‡•Å‡§∞‡§∏‡•ç‡§ï‡•É‡§§ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï | ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§Ö‡§ß‡§ø‡§µ‡•á‡§∂‡§® ‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£ ‡§ö‡§ø‡§®‡•ç‡§π ‡§Ö‡§µ‡§æ‡§∞‡•ç‡§° ‡§µ‡§ø‡§ú‡•á‡§§‡§æ">
    <meta name="twitter:image" content="https://satyapal.vercel.app/og-image.jpg">
    
    <!-- Fuse.js for fuzzy search -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>

    <!-- ===== ULTIMATE PERFORMANCE LIBRARIES 2025 ===== -->

    <!-- AOS CSS -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">

    <!-- Toastify - Notifications -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

    <!-- PhotoSwipe - Image Gallery -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.css">

    <!-- ‚úÖ TUI Image Editor (ADD THESE) -->
    <link rel="stylesheet" href="https://uicdn.toast.com/tui-image-editor/latest/tui-image-editor.css">
    <link rel="stylesheet" href="https://uicdn.toast.com/tui-color-picker/latest/tui-color-picker.css">

    <!-- Your main stylesheet -->
    <link rel="stylesheet" href="facebook_complete.css">

    <!-- ‚≠ê ADD PERFORMANCE OPTIMIZATIONS HERE ‚≠ê -->
    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://juznwjbznnlccdhhcpso.supabase.co">
    <link rel="dns-prefetch" href="https://juznwjbznnlccdhhcpso.supabase.co">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <!-- Preload critical images -->
    <link rel="preload" as="image" href="https://satyapal.vercel.app/profile.jpg">

</head>
<body style="overscroll-behavior-y: contain;">
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
             <!--   <span class="logo">facebook</span> -->
            </div>
            <div class="nav-center">
                <input type="text" id="searchInput" name="searchInput" class="search-bar" placeholder="Search" />
                <div id="searchResults" class="search-results"></div>
            </div>
            <div class="nav-right">
                <div class="nav-icon" id="adminAddPostBtn" title="Add Post" style="display: none;">‚ûï</div>
                <div class="nav-icon">üè†</div>
                <div class="nav-icon">üì∫</div>
                <div class="nav-icon">üë•</div>
                <div class="nav-icon">üîî</div>
                <div class="nav-icon" id="adminLoginBtn" title="Admin Login">‚öôÔ∏è</div>

                <!-- NEW: Hamburger menu button (hidden on desktop) -->
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>

            <!-- NEW: Mobile dropdown menu -->
            <div class="mobile-dropdown-menu" id="mobileDropdown">
                <div class="mobile-menu-item" id="adminAddPostBtnMobile" style="display: none;">‚ûï Add Post</div>
                <div class="mobile-menu-item">üè† Home</div>
                <div class="mobile-menu-item">üì∫ Videos</div>
                <div class="mobile-menu-item">üë• Groups</div>
                <div class="mobile-menu-item" id="notificationBtnMobile">üîî Notifications</div>
                <div class="mobile-menu-item" id="adminLoginBtnMobile">‚öôÔ∏è Admin Login</div>
            </div>
        </div>
    </nav>

    <!-- Profile Header -->
    <header class="profile-header">
        <div class="cover-photo">
            <img src="cover.jpg" alt="Cover Photo" onerror="this.style.display='none'" />
        </div>
        <div class="profile-info-container">
            <div class="profile-picture">
                <img src="profile.jpg" alt="Profile Picture" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22168%22 height=%22168%22%3E%3Crect fill=%22%23ddd%22/%3E%3C/svg%3E'" />
            </div>
            <div class="profile-details">
                <h1 class="profile-name">
                    <a href="https://facebook.com/satyapal.28" target="_blank" rel="noopener noreferrer">Satya Pal Singh</a>
                </h1>
                <div class="profile-stats">
                    <span>üìù <strong id="totalPosts">0</strong> Posts</span>
                    <span>üë• <strong>5.1K</strong> Friends</span>
                    <span>üì∏ <strong>10K</strong> Photos</span>
                </div>
            </div>
        </div>
        <div class="profile-nav">
            <button class="profile-tab active">Posts</button>
            <button class="profile-tab">About</button>
            <button class="profile-tab">Reels</button>
            <button class="profile-tab">Photos</button>
            <button class="profile-tab">Events</button>
            <button class="profile-tab">Friends</button>
            <button class="profile-tab">More</button>
        </div>
    </header>

    <!-- Main Container -->
    <main class="main-container">
        <aside class="left-sidebar">
            <!-- Intro Card -->
            <div class="sidebar-card">
                <h3 class="sidebar-title">Intro</h3>
                <div class="intro-bio">
                    ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§™‡•Å‡§∞‡§∏‡•ç‡§ï‡•É‡§§ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï<br />
                    ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§Ö‡§ß‡§ø‡§Ø‡§® ‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£ ‡§ö‡§ø‡§®‡•ç‡§π ‡§Ö‡§µ‡§æ‡§∞‡•ç‡§° ‡§µ‡§ø‡§ú‡•á‡§§‡§æ<br />
                    ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§Ü‡§à‡§∏‡•Ä‡§ü‡•Ä ‡§Ö‡§µ‡§æ‡§∞‡•ç‡§° ‡§µ‡§ø‡§ú‡•á‡§§‡§æ
                </div>
                <div class="intro-list">
                    <div class="intro-item">
                        <svg class="intro-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z" />
                        </svg>
                        <span>Works at <strong>J.H.S. Kagarol 1</strong></span>
                    </div>
                    <div class="intro-item">
                        <svg class="intro-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z" />
                        </svg>
                        <span>Studied at <strong>St. Johns College, Agra, UP, India</strong></span>
                    </div>
                    <div class="intro-item">
                        <svg class="intro-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
                        </svg>
                        <span>Lives in <strong>Agra, Uttar Pradesh</strong></span>
                    </div>
                    <div class="intro-item">
                        <svg class="intro-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 12c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6-1.8C18 6.57 15.35 4 12 4s-6 2.57-6 6.2c0 2.34 1.95 5.44 6 9.14 4.05-3.7 6-6.8 6-9.14zM12 2c4.2 0 8 3.22 8 8.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 5.22 7.8 2 12 2z" />
                        </svg>
                        <span>From <strong>Agra, Uttar Pradesh</strong></span>
                    </div>
                    <div class="intro-item">
                        <svg class="intro-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                        </svg>
                        <span><strong>Married</strong></span>
                    </div>
                </div>
            </div>

            <!-- PHOTOS CARD -->
            <div class="sidebar-card">
                <div class="sidebar-header">
                    <h3 class="sidebar-title">Photos</h3>
                    <a href="#" class="see-all">See all photos</a>
                </div>
                <div class="photo-grid" id="photoGrid"><!-- Photos will be loaded from posts --></div>
            </div>

            <!-- YEAR FILTER -->
            <div class="sidebar-card">
                <h3 class="sidebar-title">üìÖ Filter by Year</h3>
                <select id="yearFilter" class="year-select">
                    <option value="all">All Years</option>
                </select>
            </div>
        </aside>

        <!-- FEED CENTER -->
        <section class="main-feed">
            <div id="postsContainer"></div>
            <div id="loadingIndicator" style="display:none;text-align:center;padding:24px;">
                <span>Loading posts...</span>
            </div>
        </section>
    </main>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="admin-modal" style="display: none;">
        <div class="admin-modal-content">
            <span class="admin-close">&times;</span>
            <h2>Admin Login</h2>
            <input type="email" id="adminEmail" placeholder="Email" class="admin-input" />
            <input type="password" id="adminPassword" name="adminPassword" placeholder="Password" class="admin-input" autocomplete="current-password" />
            <button id="adminLoginSubmit" class="admin-submit-btn">Login</button>
            <div id="adminLoginError" style="color: red; margin-top: 10px;"></div>
        </div>
    </div>
    
    <!-- ADD USERNAME MODAL HERE (right after admin modal) -->
    <div id="usernameModal" class="username-modal" style="display: none;">
        <div class="username-modal-content">
            <div class="username-modal-header">
                <h2>
                    <span>üëã</span>
                    Welcome!
                </h2>
                <p>Enter your name to personalize your experience<br>(optional - you can skip)</p>
            </div>
            
            <div class="username-input-wrapper">
                <input 
                    type="text" 
                    id="usernameInput" 
                    class="username-input"
                    placeholder="Your name" 
                    maxlength="50"
                    autocomplete="name"
                />
                <span class="username-char-count" id="charCount"></span>
            </div>
            
            <div class="username-buttons">
                <button id="usernameSkip" class="username-btn username-skip-btn">
                    Skip
                </button>
                <button id="usernameSubmit" class="username-btn username-submit-btn">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <!-- Tui Image Editor Modal -->
    <div id="tuiEditorModal" class="tui-editor-modal" style="display: none;">
        <div class="tui-editor-header">
            <button id="tuiEditorClose" class="tui-editor-close-btn">‚úï Close</button>
            <button id="tuiEditorSave" class="tui-editor-save-btn">üíæ Save</button>
        </div>
        <div id="tuiImageEditorContainer"></div>
    </div>

    <script>
    !function(t,e){
        var o,n,p,r;
        if (!e.__SV) {
        window.posthog = e;
        e._i = [];
        e.init = function(i,s,a){
            function g(t,e){
            var o = e.split(".");
            if (o.length == 2) {
                t = t[o[0]];
                e = o[1];
            }
            t[e] = function(){
                t.push([e].concat(Array.prototype.slice.call(arguments,0)));
            };
            }
            o = t.createElement("script");
            o.type = "text/javascript";
            o.async = true;
            o.src = "https://us.posthog.com/static/array.js";
            n = t.getElementsByTagName("script")[0];
            n.parentNode.insertBefore(o, n);

            var u = e;
            if (a !== undefined) {
            u = e[a] = [];
            } else {
            a = "posthog";
            }
            u.people = u.people || [];
            u.toString = function(t){
            var str = "posthog";
            if (a !== "posthog") str += "." + a;
            if (!t) str += " (stub)";
            return str;
            };
            u.people.toString = function(){
            return u.toString(1) + ".people (stub)";
            };
            p = "capture identify alias people.set people.set_once reset".split(" ");
            for (r = 0; r < p.length; r++) g(u, p[r]);
            e._i.push([i, s, a]);
        };
        }
    }(document, window.posthog || {});

    posthog.init('phc_GgaMmRzQPzGJ1LUtj6Y6Go7OCXn7Jp5qusfgV0uVw7h', {
        api_host: 'https://us.posthog.com'
    });
    </script>

    <script>
    // Global JS errors
    window.onerror = function (message, source, lineno, colno, error) {
    if (window.posthog) {
        posthog.captureException(error || new Error(message), {
        source,
        lineno,
        colno
        });
    }
    };

    // Unhandled promise rejections
    window.onunhandledrejection = function (event) {
    if (window.posthog) {
        posthog.captureException(event.reason, {
        type: 'unhandled_promise_rejection'
        });
    }
    };
    </script>

    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.47.0/dist/umd/supabase.js"></script>
    <script>
        window.SUPABASE_URL = 'https://juznwjbznnlccdhhcpso.supabase.co';
        window.SUPABASE_ANON_KEY = 'sb_publishable_RSXulp5PrlLVmcWnfPrl9A_T_-e_arT';
    </script>

    <!-- AOS Script -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- ‚úÖ NEW: Hammer.js - Touch Gestures -->
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
    
    <!-- Toastify (keep existing) -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    
    <!-- Tippy.js with Popper (keep existing) -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>

    <!-- PhotoSwipe - Using unpkg CDN (more reliable) -->
    <script src="https://unpkg.com/photoswipe@5.4.3/dist/umd/photoswipe.umd.min.js"></script>
    <script src="https://unpkg.com/photoswipe@5.4.3/dist/umd/photoswipe-lightbox.umd.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <script src="https://uicdn.toast.com/tui-code-snippet/latest/tui-code-snippet.min.js"></script>
    <script src="https://uicdn.toast.com/tui-color-picker/latest/tui-color-picker.min.js"></script>
    <script src="https://uicdn.toast.com/tui-image-editor/latest/tui-image-editor.min.js"></script>

    <!-- ============================================ -->
    <!-- YOUR MODULAR SCRIPTS (Load in Order) -->
    <!-- ============================================ -->
    
    <!-- 1. Configuration (must load first) -->
    <script src="js/config.js"></script>
    
    <!-- 2. Core utilities -->
    <script src="js/security.js"></script>
    <script src="js/utils.js"></script>
    
    <!-- 3. Supabase client -->
    <script src="js/supabaseClient.js"></script>
    
    <!-- 4. Data & Actions -->
    <script src="js/data-loader.js"></script>
    <script src="js/post-actions.js"></script>
    <script src="js/admin-actions.js"></script>
    
    <!-- 5. Rendering & UI -->
    <script src="js/translation.js"></script>
    <script src="js/search.js"></script>
    <script src="js/post-renderer.js"></script>
    <script src="js/image-gallery.js"></script>
    <script src="js/ui-handlers.js"></script>
    
    <!-- 6. Main initialization (must load last) -->
    <script src="js/main.js"></script>
    
    <!-- ‚ú® NEW: Initialize Enhancement Libraries -->
    <script>
    window.addEventListener('DOMContentLoaded', function() {
        // 1. Native smooth scroll
        document.documentElement.style.scrollBehavior = 'smooth';
        console.log('‚úÖ Native smooth scroll enabled');

        // 2. Initialize AOS (CRITICAL!)
        setTimeout(() => {
            try {
                if (typeof AOS !== 'undefined') {
                    AOS.init({
                        duration: 400,
                        easing: 'ease-out',
                        once: false,
                        mirror: false,
                        offset: 50,
                        delay: 0
                    });
                    console.log('‚úÖ AOS initialized');
                } else {
                    console.error('‚ùå AOS library not loaded!');
                }
            } catch(e) {
                console.error('‚ùå AOS error:', e);
            }
        }, 100);

        // 3. Initialize Tooltips
        setTimeout(() => {
            try {
                if (typeof tippy !== 'undefined') {
                    tippy('.action-btn', {
                        animation: 'scale',
                        theme: 'facebook',
                        placement: 'top',
                        delay: [500, 0]
                    });

                    tippy('.nav-icon', {
                        animation: 'fade',
                        placement: 'bottom',
                        delay: [500, 0]
                    });
                    console.log('‚úÖ Tippy tooltips initialized');
                }
            } catch(e) {
                console.error('‚ùå Tippy error:', e);
            }
        }, 1000);
    });
    </script>

    <!-- ADD THIS DEBUG SCRIPT AFTER -->
    <script>
    window.addEventListener('DOMContentLoaded', function() {
        console.log('üîç DEBUG: DOM Loaded');
        console.log('üîç Supabase Client:', window.supabase);
        console.log('üîç Supabase URL:', window.SUPABASE_URL);
        console.log('üîç Supabase Key:', window.SUPABASE_ANON_KEY);
    
        // Check if functions exist
        setTimeout(() => {
            console.log('üîç loadAllPosts exists:', typeof loadAllPosts);
            console.log('üîç renderPosts exists:', typeof renderPosts);
            console.log('üîç allPosts:', window.allPosts);
        }, 2000);
    });
    </script>
</body>
</html>